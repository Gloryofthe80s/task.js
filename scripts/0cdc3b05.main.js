function TaskObject(a){a=a||{},this.task=a.task,this.complete=!1,this.uniqueId=_.uniqueId("task_")}var taskTemplate=_.template($(".printedTask").text()),tasksCompletedCounter=_.template($(".tasksCompleted").text()),taskArray=[],updateEditedTask=function(a){var b=$(".task-input-box").val(),c=_.findWhere(taskArray,{uniqueId:a});_.each(taskArray,function(a){a.uniqueId===c.uniqueId&&$(c).prop("task",b)})},reprintAllTasks=function(){$(".printed-task-container").html(""),_.each(taskArray,function(a){$(".printed-task-container").append(taskTemplate(a))}),updateTaskCounter()},finalizeEdit=function(a){updateEditedTask(a),reprintAllTasks()},updateTaskCounter=function(){var a=$("#completed-counter").find(".num-remaining"),b=_.where(taskArray,{complete:!1});a.text(0===b.length?"0 tasks left":1===b.length?"1 task left":b.length+" tasks left")};$(document).ready(function(){$(".create-new-task").on("focus",function(){$(this).removeAttr("placeholder"),$(this).css("outline","none"),$(this).css("text-align","left")}),$(".create-new-task").on("focusout",function(){$(this).attr("placeholder","I need to..."),$(this).css("text-align","center")}),$(".create-new-task").on("keypress",function(a){if(13==a.which&&""!=$(this).val()){var b={task:$(".create-new-task").val()};taskArray.push(new TaskObject(b)),reprintAllTasks(),updateTaskCounter(),$(this).val("")}}),$(".printed-task-container").on("mouseenter",".task-wrapper",function(a){a.preventDefault(),$(this).find(".task-btns").stop(),$(this).find(".task-btns").animate({opacity:1},150)}),$(".printed-task-container").on("mouseleave",".task-wrapper",function(a){a.preventDefault(),$(this).find(".task-btns").stop(),$(this).find(".task-btns").animate({opacity:0},150)}),$(".printed-task-container").on("mouseenter",".btn-trash-task",function(a){a.preventDefault(),$(this).addClass("hovered")}),$(".printed-task-container").on("mouseleave",".btn-trash-task",function(a){a.preventDefault(),$(this).removeClass("hovered")}),$(".printed-task-container").on("click",".btn-mark-completed",function(){$(this).closest(".task-wrapper").toggleClass("completed");var a=_.findWhere(taskArray,{uniqueId:$(this).closest(".task-wrapper").attr("id")});_.each(taskArray,function(b){b.uniqueId==a.uniqueId&&(0==$(a).prop("complete")?$(a).prop("complete",!0):$(a).prop("complete",!1))}),updateTaskCounter()}),$(".printed-task-container").on("dblclick",".task-side-left",function(){var a=$(this).parent(".task-wrapper").attr("id"),b=$(this).find(".task-p").text(),c="<input type='text' class='task-input-box'>";$(this).find($(".task-name")).html(c);var d=$(this).find(".task-input-box");d.prop("value",b),d.focus(),d.on("keypress",function(b){13==b.which&&finalizeEdit(a)}),d.on("blur",function(){finalizeEdit(a)})}),$(".printed-task-container").on("click",".btn-trash-task",function(){$(this).closest(".task-wrapper").fadeOut("fast",function(){$(this).closest(".task-wrapper").remove()});var a=_.findWhere(taskArray,{uniqueId:$(this).closest(".task-wrapper").attr("id")});_.each(taskArray,function(b,c){b.uniqueId==a.uniqueId&&taskArray.splice(c,1)}),updateTaskCounter()})});